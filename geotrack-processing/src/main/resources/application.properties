# =============================================================================
# GeoTrack Processing Service Configuration
# =============================================================================

quarkus.application.name=geotrack-processing
quarkus.http.port=8081

# =============================================================================
# Kafka — Event Streaming
# =============================================================================
kafka.bootstrap.servers=${KAFKA_BOOTSTRAP:localhost:9092}

# Incoming: raw positions from ingestion
mp.messaging.incoming.position-raw.connector=smallrye-kafka
mp.messaging.incoming.position-raw.topic=position.raw
mp.messaging.incoming.position-raw.group.id=processing-group
mp.messaging.incoming.position-raw.value.deserializer=org.apache.kafka.common.serialization.StringDeserializer
mp.messaging.incoming.position-raw.failure-strategy=dead-letter-queue
mp.messaging.incoming.position-raw.dead-letter-queue.topic=position.dlq

# Outgoing: processed positions (consumed by WebSocket gateway)
mp.messaging.outgoing.position-processed.connector=smallrye-kafka
mp.messaging.outgoing.position-processed.topic=position.processed
mp.messaging.outgoing.position-processed.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# Outgoing: geofence alerts
mp.messaging.outgoing.alert-geofence.connector=smallrye-kafka
mp.messaging.outgoing.alert-geofence.topic=alert.geofence
mp.messaging.outgoing.alert-geofence.value.serializer=org.apache.kafka.common.serialization.StringSerializer

# =============================================================================
# Jackson — Java 21 records + Instant serialization
# =============================================================================
quarkus.jackson.write-dates-as-timestamps=false

# =============================================================================
# Logging
# =============================================================================
# Disable Dev Services — use docker-compose infra
%dev.quarkus.kafka.devservices.enabled=false

quarkus.log.level=INFO
quarkus.log.category."com.geotrack".level=DEBUG
