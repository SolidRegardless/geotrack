nameOverride: ""
fullnameOverride: ""

global:
  namespace: geotrack
  imagePullPolicy: IfNotPresent

api:
  replicaCount: 3
  image:
    repository: ghcr.io/geotrack/geotrack-api
    tag: latest
  port: 8080
  service:
    type: NodePort
    nodePort: 30080
  resources:
    requests:
      cpu: 250m
      memory: 256Mi
    limits:
      cpu: "1"
      memory: 512Mi
  hpa:
    enabled: true
    minReplicas: 2
    maxReplicas: 10
    targetCPUUtilization: 70
  healthCheck:
    liveness: /q/health/live
    readiness: /q/health/ready

processing:
  replicaCount: 2
  image:
    repository: ghcr.io/geotrack/geotrack-processing
    tag: latest
  port: 8081
  resources:
    requests:
      cpu: 500m
      memory: 512Mi
    limits:
      cpu: "2"
      memory: 1Gi
  healthCheck:
    liveness: /q/health/live
    readiness: /q/health/ready

frontend:
  replicaCount: 1
  image:
    repository: ghcr.io/geotrack/geotrack-frontend
    tag: latest
  port: 80
  service:
    type: NodePort
    nodePort: 30000
  resources:
    requests:
      cpu: 50m
      memory: 64Mi
    limits:
      cpu: 200m
      memory: 128Mi

simulator:
  live:
    enabled: true
    replicaCount: 1
  ships:
    enabled: true
    replicaCount: 1
  image:
    repository: ghcr.io/geotrack/geotrack-simulator
    tag: latest
  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 256Mi

postgres:
  enabled: true
  image:
    repository: postgis/postgis
    tag: "16-3.4"
  port: 5432
  storage: 100Gi
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: "2"
      memory: 4Gi
  credentials:
    username: geotrack
    password: changeme
    database: geotrack

kafka:
  enabled: true
  image:
    repository: docker.redpanda.com/redpandadata/redpanda
    tag: latest
  ports:
    internal: 9092
    external: 29092
  storage: 50Gi
  resources:
    requests:
      cpu: 500m
      memory: 1Gi
    limits:
      cpu: "2"
      memory: 2Gi

ingress:
  enabled: false
  className: nginx
  host: geotrack.example.com
  tls:
    enabled: false
    secretName: geotrack-tls
  annotations:
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
    nginx.ingress.kubernetes.io/websocket-services: "geotrack-api"

config:
  kafkaBootstrapServers: "geotrack-kafka:9092"
  datasourceUrl: "jdbc:postgresql://geotrack-postgres:5432/geotrack"
  datasourceUsername: geotrack
  openskyEnabled: "true"
  aisstreamEnabled: "true"

secrets:
  datasourcePassword: changeme
  aisstreamApiKey: changeme
